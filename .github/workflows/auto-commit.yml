name: ğŸŒ¿ Auto Commit Journalier

on:
  schedule:
    - cron: "0 20 * * *" # Tous les jours Ã  20h UTC (22h Ã  Madagascar)
  workflow_dispatch: # Permet de dÃ©clencher manuellement aussi

jobs:
  auto-commit:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: ğŸ“¥ Checkout du dÃ©pÃ´t
        uses: actions/checkout@v3

      - name: ğŸ•“ Configurer l'heure locale
        run: sudo timedatectl set-timezone Indian/Antananarivo

      - name: âœï¸ Modifier le fichier
        run: |
          echo "$(date) - auto commit ğŸŒ±" >> log.txt

      - name: ğŸ” Configurer Git
        run: |
          git config user.name "Raymond Dzery Hago"
          git config user.email "simplice2236@gmail.com"

      - name: âœ… Commit & Push
        run: |
          git add log.txt
          git commit -m "Auto commit du $(date '+%Y-%m-%d')"
          git push
